(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8414)}])},6414:function(e,n,t){"use strict";t.r(n);var a=t(5893),i=t(7294);let r={identity:{kernel:[[1]],size:1,normalize:!1},gaussian:{kernel:[[1,2,1],[2,4,2],[1,2,1]],size:3,normalize:!0},gaussian_5x5:{kernel:[[1,4,6,4,1],[4,16,24,16,4],[6,24,36,24,6],[4,16,24,16,4],[1,4,6,4,1]],size:5,normalize:!0},laplacian:{kernel:[[1,1,1],[1,-8,1],[1,1,1]],size:3,normalize:!1},laplacian_of_gaussian:{kernel:[[0,0,-1,0,0],[0,-1,-2,-1,0],[-1,-2,16,-2,-1],[0,-1,-2,-1,0],[0,0,-1,0,0]],size:5,normalize:!1}},l=e=>{let{onConvolutionsChange:n,setCustomConvolution:t}=e,[l,s]=(0,i.useState)(3),[o,c]=(0,i.useState)(3),[u,d]=(0,i.useState)(3),[h,g]=(0,i.useState)(3),[f,p]=(0,i.useState)(Array.from({length:o},()=>Array.from({length:l},()=>0))),[m,b]=(0,i.useState)(!1),[x,w]=(0,i.useState)(!0),[_,j]=(0,i.useState)("custom"),v=(e,n,t)=>{let a=[...f];a[e][n]=parseFloat(t),p(a)},y=()=>{n({kernel:f,normalize:x})},k=e=>{t(e.target.checked),b(e.target.checked)};return(0,i.useState)(()=>{console.log("!!! + end of useEffect for onConvolutionsChange:",f[0])},[f,x]),(0,i.useEffect)(()=>{let e=Array(o).fill(Array(l).fill(0)).map(e=>e.slice());p(e)},[u,h]),(0,a.jsxs)("div",{className:"convolutions",children:[(0,a.jsx)("h4",{children:"Convolutions"}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:m,onChange:k}),"Enable"]})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:y,children:"Set Kernel"})}),(0,a.jsx)("h4",{children:"Kernel Display"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Width:",(0,a.jsx)("input",{className:"show-arrows",type:"number",min:"1",max:"10",value:l,onChange:e=>{let n=parseInt(e.target.value)||1,t=Math.min(Math.max(n,1),10);s(t),d(t)}})]}),(0,a.jsxs)("label",{children:["Height:",(0,a.jsx)("input",{className:"show-arrows",type:"number",min:"1",max:"10",value:o,onChange:e=>{let n=parseInt(e.target.value)||1,t=Math.min(Math.max(n,1),10);c(t),g(t)}})]})]}),(0,a.jsx)("table",{children:(0,a.jsx)("tbody",{children:f.map((e,n)=>(0,a.jsx)("tr",{children:e.map((e,t)=>(0,a.jsx)("td",{children:(0,a.jsx)("input",{type:"number",value:e,pattern:"\\d*",inputMode:"numeric",onChange:e=>{""!=e.target.value&&isNaN(e.target.value)?v(n,t,0):v(n,t,e.target.value)}})},t))},n))})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:x,onChange:e=>w(e.target.checked)}),"Normalize"]})}),(0,a.jsx)("h5",{children:"Pre-built Kernels"}),function(){let e=[];for(let[n,t]of Object.entries(r))e.push((0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"radio",value:n,checked:_===n,onChange:function(e){t.normalize!=x&&w(t.normalize),t.width!=l&&s(t.size),t.height!=o&&c(t.size),p(t.kernel),j(n)}}),n]})},n));return e}()]})};n.default=l},2770:function(e,n,t){"use strict";t.r(n);var a=t(5893),i=t(7294);let r=e=>{let{title:n,children:t}=e,[r,l]=(0,i.useState)(!1),s=()=>{l(!r)};return(0,a.jsxs)("div",{className:"expandable-section",children:[(0,a.jsxs)("div",{className:"expandable-section-header",onClick:s,children:[(0,a.jsx)("div",{className:"triangle ".concat(r?"expanded":"")}),(0,a.jsx)("h3",{children:n})]}),r&&(0,a.jsx)("div",{className:"expandable-section-content",children:t})]})};n.default=r},9889:function(e,n,t){"use strict";t.r(n);var a=t(5893),i=t(7294);let r=e=>{let{onTransformationsChange:n}=e,[t,r]=(0,i.useState)({mirror:!1,flip:!1,rotate:0,scale:100,scalingMethod:"nearest"}),l=e=>{let{name:n,checked:a}=e.target;r({...t,[n]:a})},s=e=>{let{name:n,value:a}=e.target;r({...t,[n]:parseFloat(a)})},o=e=>{let{name:n,value:a}=e.target;r({...t,[n]:a})};return(0,i.useEffect)(()=>{n&&n(t)},[t,n]),(0,a.jsxs)("div",{className:"geometric-transformations",children:[(0,a.jsx)("h4",{children:"Geometric Spatial Transformations"}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",name:"mirror",checked:t.mirror,onChange:l}),"Mirror Image"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",name:"flip",checked:t.flip,onChange:l}),"Flip upside down"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Rotate",(0,a.jsx)("input",{type:"range",name:"rotate",min:"0",max:"360",value:t.rotate,onChange:s})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Scale Image",(0,a.jsx)("input",{type:"number",name:"scale",min:"1",max:"500",value:t.scale,onChange:s}),"%"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"radio",name:"scalingMethod",value:"nearest",checked:"nearest"===t.scalingMethod,onChange:o}),"Nearest neighbour"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"radio",name:"scalingMethod",value:"bilinear",checked:"bilinear"===t.scalingMethod,onChange:o}),"Bi-linear interpolation"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"radio",name:"scalingMethod",value:"bicubic",checked:"bicubic"===t.scalingMethod,onChange:o}),"Bicubic interpolation"]})})]})};n.default=r},1867:function(e,n,t){"use strict";t.r(n);var a=t(5893),i=t(7294);let r=e=>{let{onPaddingTypeChange:n}=e,[t,r]=(0,i.useState)("reflected"),l=e=>{r(e.target.value)};return(0,i.useEffect)(()=>{n&&n(t)},[t,n]),(0,a.jsxs)("div",{className:"padding",children:[(0,a.jsx)("h4",{children:"Padding"}),(0,a.jsxs)("div",{className:"padding-container",children:[(0,a.jsxs)("label",{className:"radio-label",children:[(0,a.jsx)("input",{type:"radio",value:"reflected",checked:"reflected"===t,onChange:l}),"Reflected indexing"]}),(0,a.jsxs)("label",{className:"radio-label",children:[(0,a.jsx)("input",{type:"radio",value:"circular",checked:"circular"===t,onChange:l}),"Circular indexing"]}),(0,a.jsxs)("label",{className:"radio-label",children:[(0,a.jsx)("input",{type:"radio",value:"zero",checked:"zero"===t,onChange:l}),"Zero padding"]})]})]})};n.default=r},2808:function(e,n,t){"use strict";t.r(n);var a=t(5893),i=t(7294);let r=e=>{let{onSinglePixelOperationsChange:n}=e,[t,r]=(0,i.useState)({inverse:!1,threshold:!1,thresholdValue:0,linearMapping:!1,linearA:1,linearB:0,powerLaw:!1,gamma:1,equalize:!1}),l=e=>{let{name:n,checked:a}=e.target;r({...t,[n]:a})},s=e=>{let{name:n,value:a}=e.target;r({...t,[n]:parseFloat(a)})};function o(e,n,t,i,r,l){return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:e,name:n,checked:t,onChange:i}),void 0===r?n[0].toUpperCase()+n.slice(1):r]}),l]})}return(0,i.useEffect)(()=>{n&&n(t)},[t,n]),(0,a.jsxs)("div",{className:"single-pixel-operations",children:[(0,a.jsx)("h4",{children:"Single Pixel Operations"}),(0,a.jsx)("h5",{children:"Linear Mappings"}),o("checkbox","inverse",t.inverse,l),o("checkbox","threshold",t.threshold,l,"Threshold at u = ",(0,a.jsx)("input",{type:"number",name:"thresholdValue",value:t.thresholdValue,onChange:s,disabled:!t.threshold})),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",name:"linearMapping",checked:t.linearMapping,onChange:l}),"Linear mapping with a ="]}),(0,a.jsx)("input",{type:"number",name:"linearA",value:t.linearA,onChange:s,disabled:!t.linearMapping}),"and b =",(0,a.jsx)("input",{type:"number",name:"linearB",value:t.linearB,onChange:s,disabled:!t.linearMapping})]}),(0,a.jsx)("h5",{children:"Power Law Mapping"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",name:"powerLaw",checked:t.powerLaw,onChange:l}),"Gamma ="]}),(0,a.jsx)("input",{type:"number",name:"gamma",value:t.gamma,onChange:s,disabled:!t.powerLaw})]}),(0,a.jsx)("h5",{children:"Histogram Equalization"}),o("checkbox","equalize",t.equalize,l)]})};n.default=r},8414:function(e,n,t){"use strict";let a;t.r(n),t.d(n,{default:function(){return L}});var i=t(5893),r=t(7294);t(4494);let l=Array(128).fill(void 0);l.push(void 0,null,!0,!1);let s=l.length;function o(e){let n=l[e];return e<132||(l[e]=s,s=e),n}let c=0,u=null;function d(){return(null===u||0===u.byteLength)&&(u=new Uint8Array(a.memory.buffer)),u}let h=new TextEncoder("utf-8"),g="function"==typeof h.encodeInto?function(e,n){return h.encodeInto(e,n)}:function(e,n){let t=h.encode(e);return n.set(t),{read:e.length,written:t.length}};function f(e,n,t){if(void 0===t){let t=h.encode(e),a=n(t.length);return d().subarray(a,a+t.length).set(t),c=t.length,a}let a=e.length,i=n(a),r=d(),l=0;for(;l<a;l++){let n=e.charCodeAt(l);if(n>127)break;r[i+l]=n}if(l!==a){0!==l&&(e=e.slice(l)),i=t(i,a,a=l+3*e.length);let n=d().subarray(i+l,i+a),r=g(e,n);l+=r.written}return c=l,i}let p=null;function m(){return(null===p||0===p.byteLength)&&(p=new Int32Array(a.memory.buffer)),p}let b=null,x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function w(e,n){return x.decode(d().subarray(e,e+n))}function _(e){s===l.length&&l.push(l.length+1);let n=s;return s=l[n],l[n]=e,n}x.decode();let j=128,v=null;function y(e,n){try{return e.apply(this,n)}catch(e){a.__wbindgen_exn_store(_(e))}}async function k(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{let t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}async function C(e){void 0===e&&(e=new t.U(t(5732)));let n=function(){let e={};return e.wbg={},e.wbg.__wbindgen_object_drop_ref=function(e){o(e)},e.wbg.__wbindgen_string_get=function(e,n){let t=l[n],i="string"==typeof t?t:void 0;var r=null==i?0:f(i,a.__wbindgen_malloc,a.__wbindgen_realloc),s=c;m()[e/4+1]=s,m()[e/4+0]=r},e.wbg.__wbindgen_number_get=function(e,n){let t=l[n],i="number"==typeof t?t:void 0;((null===b||0===b.byteLength)&&(b=new Float64Array(a.memory.buffer)),b)[e/8+1]=null==i?0:i,m()[e/4+0]=null!=i},e.wbg.__wbindgen_string_new=function(e,n){let t=w(e,n);return _(t)},e.wbg.__wbg_data_ba126c289535c14a=function(e,n){let t=l[n].data,i=function(e,n){let t=n(1*e.length);return d().set(e,t/1),c=e.length,t}(t,a.__wbindgen_malloc),r=c;m()[e/4+1]=r,m()[e/4+0]=i},e.wbg.__wbg_newwithu8clampedarrayandsh_5983a7df9463fed0=function(){return y(function(e,n,t,i){let r=new ImageData(((null===v||0===v.byteLength)&&(v=new Uint8ClampedArray(a.memory.buffer)),v).subarray(e/1,e/1+n),t>>>0,i>>>0);return _(r)},arguments)},e.wbg.__wbg_log_7bb108d119bafbc1=function(e){console.log(l[e])},e.wbg.__wbg_getImageData_69bdab96ea46e1af=function(){return y(function(e,n,t,a,i){let r=l[e].getImageData(n,t,a,i);return _(r)},arguments)},e.wbg.__wbg_putImageData_3d6a58a9eb5f743c=function(){return y(function(e,n,t,a){l[e].putImageData(l[n],t,a)},arguments)},e.wbg.__wbg_get_27fe3dac1c4d0224=function(e,n){let t=l[e][n>>>0];return _(t)},e.wbg.__wbg_length_e498fbc24f9c1d4f=function(e){let n=l[e].length;return n},e.wbg.__wbg_isArray_39d28997bf6b96b4=function(e){let n=Array.isArray(l[e]);return n},e.wbg.__wbg_instanceof_Object_f5a826c4da0d4a94=function(e){let n;try{n=l[e]instanceof Object}catch{n=!1}let t=n;return t},e.wbg.__wbg_entries_4e1315b774245952=function(e){let n=Object.entries(l[e]);return _(n)},e.wbg.__wbindgen_debug_string=function(e,n){let t=function e(n){let t;let a=typeof n;if("number"==a||"boolean"==a||null==n)return`${n}`;if("string"==a)return`"${n}"`;if("symbol"==a){let e=n.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==a){let e=n.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(n)){let t=n.length,a="[";t>0&&(a+=e(n[0]));for(let i=1;i<t;i++)a+=", "+e(n[i]);return a+"]"}let i=/\[object ([^\]]+)\]/.exec(toString.call(n));if(!(i.length>1))return toString.call(n);if("Object"==(t=i[1]))try{return"Object("+JSON.stringify(n)+")"}catch(e){return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:t}(l[n]),i=f(t,a.__wbindgen_malloc,a.__wbindgen_realloc),r=c;m()[e/4+1]=r,m()[e/4+0]=i},e.wbg.__wbindgen_throw=function(e,n){throw Error(w(e,n))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:i,module:r}=await k(await e,n);return a=i.exports,C.__wbindgen_wasm_module=r,b=null,p=null,u=null,v=null,a}var N=t(2770),S=t(1867),M=t(9889),A=t(2808),z=t(6414),L=function(){let e=(0,r.useRef)(),n=(0,r.useRef)(),t=(0,r.useRef)(),s=(0,r.useRef)(),c=!1,u=(0,r.useRef)(),[d,h]=(0,r.useState)("reflected"),g=e=>{h(e),console.log(e)},[f,p]=(0,r.useState)({mirror:!1,flip:!1,rotate:0,scale:100,scalingMethod:"nearest"}),b=e=>{p(e),console.log(f)},[x,w]=(0,r.useState)({inverse:!1,threshold:!1,thresholdValue:0,linearMapping:!1,linearA:1,linearB:0,powerLaw:!1,gamma:1,equalize:!1}),v=e=>{w(e)},[y,k]=(0,r.useState)(!1),[L,E]=(0,r.useState)({kernel:[,,,].fill([,,,].fill(0)),normalize:!1}),I=e=>{E(e),console.log(y,e)},[D,O]=(0,r.useState)(!1),[R,F]=(0,r.useState)(!1),P=(0,r.useCallback)((e,n,t)=>{let i=[y?"convolutionDemo":null,D?"powerLawMappingDemo":null,x.inverse?"inverseDemo":null,R?"stackedDemo":null].filter(e=>null!==e),r=L.kernel;if(L.normalize){let e=r.reduce((e,n)=>e+n.reduce((e,n)=>e+n,0),0);r=r.map(n=>n.map(n=>n/e))}let s=[];x.inverse&&s.push({op_type:"linear",a:-1,b:255}),x.threshold&&s.push({op_type:"threshold",a:x.thresholdValue,b:0}),x.linearMapping&&s.push({op_type:"linear",a:x.linearA,b:x.linearB}),x.powerLaw&&s.push({op_type:"powerLaw",a:x.gamma,b:0}),x.equalize&&s.push({op_type:"histogram_equalization",a:0,b:0}),function(e,n,t,i,r,s){try{let u=a.__wbindgen_add_to_stack_pointer(-16);a.draw(u,function(e){if(1==j)throw Error("out of js stack");return l[--j]=e,j}(e),n,t,_(i),_(r),_(s));var c=m()[u/4+0];if(m()[u/4+1])throw o(c)}finally{a.__wbindgen_add_to_stack_pointer(16),l[j++]=void 0}}(e,n,t,i,r,s)},[D,R,x,L]);function T(e){var n=new FileReader;let t=new Image;t.onload=()=>{console.log("JS --> "+t.width+" and "+t.height),canvas.width=t.width,canvas.height=t.height,canvas.getContext("2d").drawImage(t,0,0),u.current(canvas.getContext("2d"),canvas.width,canvas.height)},n.onload=function(e){t.src=e.target.result},n.readAsDataURL(e.target.files[0])}(0,r.useEffect)(()=>{u.current=P},[P]),(0,r.useEffect)(()=>{let a;let i=e.current,r=n.current,l=s.current,o=t.current;return async function(){function e(){i.width=r.videoWidth,i.height=r.videoHeight,i.getContext("2d").drawImage(r,0,0,i.width,i.height);let n=new Image;n.src=i.toDataURL(),i.getContext("2d").drawImage(n,0,0),u.current(i.getContext("2d"),640,640),c&&window.requestAnimationFrame(e)}await C(),l.onclick=function(){c?(a.getTracks()[0].stop(),c=!1,i.getContext("2d").clearRect(0,0,i.width,i.height)):(navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(e=>{r.srcObject=e,a=e}).then(window.requestAnimationFrame(e)).catch(console.error),c=!0)},o.addEventListener("change",T,!1)}(),()=>{a&&a.getTracks().forEach(e=>e.stop())}},[]);let q=(0,i.jsxs)("div",{className:"options-column",children:[(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",value:D,onChange:e=>O(e.target.checked),id:"powerLawMappingDemo"}),(0,i.jsx)("label",{className:"form-check-label",htmlFor:"powerLawMappingDemo",children:"Power Law Mapping Demo"})]}),(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",value:R,onChange:e=>F(e.target.checked),id:"stackedDemo"}),(0,i.jsx)("label",{className:"form-check-label",htmlFor:"stackedDemo",children:"Stacked Demo"})]}),(0,i.jsxs)("div",{className:"options-row",children:[(0,i.jsx)(N.default,{title:"Padding",children:(0,i.jsx)(S.default,{onPaddingTypeChange:g})}),(0,i.jsx)(N.default,{title:"Geometric Spatial Transformations",children:(0,i.jsx)(M.default,{onTransformationsChange:b})}),(0,i.jsx)(N.default,{title:"Single Pixel Operations",children:(0,i.jsx)(A.default,{onSinglePixelOperationsChange:v})}),(0,i.jsx)(N.default,{title:"Convolutions",children:(0,i.jsx)(z.default,{onConvolutionsChange:I,setCustomConvolution:k})})]})]});return(0,i.jsxs)("div",{className:"app-container",children:[(0,i.jsx)("h1",{children:(0,i.jsx)("img",{src:"./logo.png",width:"50%",height:"auto",alt:"IMGPROBOX"})}),(0,i.jsxs)("div",{className:"content",children:[(0,i.jsx)("div",{children:q}),(0,i.jsxs)("div",{className:"options-column",children:[(0,i.jsx)("div",{className:"options-row",children:(0,i.jsx)("canvas",{ref:e,id:"canvas",width:"640",height:"640",style:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,i.jsx)("div",{className:"options-row"}),(0,i.jsxs)("div",{className:"options-row",children:[(0,i.jsx)("video",{ref:n,playsInline:!0,autoPlay:!0,muted:!0,style:{width:"100%"}}),(0,i.jsx)("button",{ref:s,className:"btn btn-primary mt-2",children:"Switch webcam"}),(0,i.jsx)("input",{type:"file",ref:t,id:"imageLoader",name:"imageLoader"})]})]})]})]})}},4494:function(){},5732:function(e,n,t){"use strict";e.exports=t.p+"static/media/without_a_bundler_bg.77c67600.wasm"}},function(e){e.O(0,[501,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);